{% extends 'core/base.html' %}

{% block title %} Home {% endblock %}

{% block section %}
<div class="flex items-center space-x-4">
    <a href="{% url 'courses' %}">
    <p class="text-base text-gray-600">Course</p>
    </a>
    <p class="text-3xl font-bold text-gray-600">Bitesize</p>
    <!-- Text with Box Leading to a Link -->
    <a href="{% url 'create' %}" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full flex items-center space-x-2">
        <span>Create</span>
    </a>
    <a href="{% url 'forum' %}">
        <p class="text-base text-gray-600">Forum</p>
    </a>
</div>
{% endblock %}

{% block content %}
    <div class="flex flex-col items-center">
        
            <!-- Container with aspect ratio -->
            <div class="aspect-w-9 aspect-h-16 w-2/5 mb-4 bg-gray-200 relative">
                {% if current_content %}
                    

                    {% if current_content.0.image_file %}
                        
                        <!-- Display image content -->
                        <img src="{{ current_content.0.image_file.url }}" alt="{{ current_content.0.title }}" class="rounded-md w-full h-auto">

                        {% if current_content.0.explanation %}
                            <h1>{{ current_content.0.explanation }}</h1>
                        {% endif %}
                    
                    {% elif current_content.0.content %}
                        <h1><strong>{{ current_content.0.title }}</strong></h1>
                        <!-- Display article content -->
                        <p>{{ current_content.0.content }}</p>
                    {% elif current_content.0.question_text %}
                        <!-- Display question content -->
                        <p>{{ current_content.0.question_text }}</p>

                        {% if current_content.0.options.all %}
                        {% for option in current_content.0.options.all %}
                            <p>{{ option.option_text }}</p>
                            <br>
                        {% endfor %}
                    {% endif %}

                    {% elif current_content.0.video_file %}
                        
                        <!-- Video player adjusted to fit container size -->
                        <video class="w-full h-full" controls="controls">
                            <source src="{{current_content.0.video_file.url}}" type="video/mp4" />
                        </video>

                        {% if current_content.0.explanation %}
                            <h1>{{ current_content.0.explanation }}</h1>
                        {% endif %}
                    
                    {% endif %}
            </div>

            <!-- Navigation buttons below the player -->
            <div class="flex justify-between w-2/5">
                <a href="{% if current_content.has_previous %}?page={{ current_content.previous_page_number }}{% else %}?page=1{% endif %}" class="bg-blue-500 text-white px-4 py-2 rounded {% if not current_content.has_previous %}hidden{% endif %}">Previous</a>
                <a href="{% if current_content.has_next %}?page={{ current_content.next_page_number }}{% else %}?page=1{% endif %}" class="bg-green-500 text-white px-4 py-2 rounded {% if not current_content.has_next %}hidden{% endif %}">Next</a>
            </div>

                <!-- Comment Form -->
                <div class="w-2/5 mt-8">
                    <h2 class="text-xl font-semibold mb-4">Add Comment</h2>
                    <form method="post">
                        {% csrf_token %}
                        {{ comment_form.as_p }}
                        <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full">Submit Comment</button>
                    </form>
                </div>
            
                <!-- List of Comments -->
                <div class="w-2/5 mt-8">
                    <h2 class="text-xl font-semibold mb-4">Comments</h2>
                    <ul>
                        {% for comment in current_content.0.comments.all %}
                            <li class="mb-4">
                                <strong>{{ comment.creator.username }}:</strong> {{ comment.comment }}
                            </li>
                        {% empty %}
                            <li>No comments yet.</li>
                        {% endfor %}
                    </ul>
                </div>


        {% else %}
            <p class="text-lg text-gray-500">No content available.</p>
        {% endif %}


    </div>
{% endblock %}







